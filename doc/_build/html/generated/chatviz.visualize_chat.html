<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>chatviz.visualize_chat &#8212; Chatviz alpha documentation</title>
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="chatviz.plotting.plot_donuts" href="chatviz.plotting.plot_donuts.html" />
    <link rel="prev" title="API reference" href="../api.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">
<script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js "></script>
<script type="text/javascript" src="../_static/js/jquery-fix.js "></script>
<script type="text/javascript" src="../_static/bootstrap-3.3.7/js/bootstrap.min.js "></script>
<script type="text/javascript" src="../_static/bootstrap-sphinx.js "></script>

  </head><body>

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html">
          Chatviz</a>
        <span class="navbar-text navbar-version pull-left"><b></b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Site <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../api.html">API</a></li>
</ul>
</ul>
</li>
              
                <li class="dropdown">
  <a role="button"
     id="dLabelLocalToc"
     data-toggle="dropdown"
     data-target="#"
     href="#">Page <b class="caret"></b></a>
  <ul class="dropdown-menu localtoc"
      role="menu"
      aria-labelledby="dLabelLocalToc"><ul>
<li><a class="reference internal" href="#">chatviz.visualize_chat</a></li>
</ul>
</ul>
</li>
              
            
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
    <div class="body col-md-12 content" role="main">
      
  <div class="section" id="chatviz-visualize-chat">
<h1>chatviz.visualize_chat<a class="headerlink" href="#chatviz-visualize-chat" title="Permalink to this headline">¶</a></h1>
<dl class="function">
<dt id="chatviz.visualize_chat">
<code class="sig-prename descclassname">chatviz.</code><code class="sig-name descname">visualize_chat</code><span class="sig-paren">(</span><em class="sig-param">df</em>, <em class="sig-param">title</em>, <em class="sig-param">colors='default'</em>, <em class="sig-param">timeline_freq='MS'</em>, <em class="sig-param">timeline_tick_format=&quot;%b '%y&quot;</em>, <em class="sig-param">timeline_tick_step=6</em>, <em class="sig-param">timeline_color='default'</em>, <em class="sig-param">timeline_stacked=False</em>, <em class="sig-param">top_n_words=10</em>, <em class="sig-param">stopwords=None</em><span class="sig-paren">)</span><a class="headerlink" href="#chatviz.visualize_chat" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a series of plots given a dataframe of messages.</p>
<p>The plots created are:</p>
<ol class="arabic simple">
<li><p>3 donut plots showing the number of messages, words and characters used
by each person in the chat.</p></li>
<li><p>A bar chart showing the average time to reply in hours for each person.</p></li>
<li><p>A timeline showing the number of messages over time, can optionally be
split down to per person.</p></li>
<li><p>Bar charts showing the most used words by each person.</p></li>
<li><p>2 radar plots showing the number of messages sent at each hour and day
respectively for each person.</p></li>
</ol>
<dl class="field-list simple">
<dt class="field-odd">Parameters</dt>
<dd class="field-odd"><dl class="simple">
<dt><strong>df</strong><span class="classifier">pd.DataFrame</span></dt><dd><p>The dataframe of messages. Must have the columns
[‘date’, ‘name’, ‘text’].</p>
</dd>
<dt><strong>title</strong><span class="classifier">str</span></dt><dd><p>The title for the plot.</p>
</dd>
<dt><strong>colors</strong><span class="classifier">{‘default’} or list of str or dict</span></dt><dd><p>The colors to be used for each person in the chat. Should be either
‘default’ in which case the default color scheme is used, a list of
colors the same length as the number of names in df[‘name’], or a dict
which maps each name to a color. For more info about color options,
see <a class="reference external" href="https://matplotlib.org/2.0.2/api/colors_api.html">here</a>.</p>
</dd>
<dt><strong>timeline_freq: str</strong></dt><dd><p>The offset string for the resample frequency in the timeline plot. See <a class="reference external" href="https://pandas.pydata.org/pandas-docs/stable/user_guide/timeseries.html#dateoffset-objects">here</a>
for more. The default is ‘MS’, which will generate a monthly plot.</p>
</dd>
<dt><strong>timeline_tick_format</strong><span class="classifier">str</span></dt><dd><p>The format string for the x tick labels in the timeline plot, which are dates.
The default is ‘%b ‘%y’ which gives for example <cite>Jan ‘19</cite>.</p>
</dd>
<dt><strong>timeline_tick_step</strong><span class="classifier">int</span></dt><dd><p>The number of steps between the ticks on the x-axis for the timeline
plot. By default this is 6, so every 6 bars will have an x-tick label.</p>
</dd>
<dt><strong>timeline_color</strong><span class="classifier">str</span></dt><dd><p>Only applicable if timeline_stacked is False. In this case, the timeline
plot will only be one color, which may want to be different from <cite>colors</cite>
as these are per person. Default is ‘default’ which will just use matplotlibs
default color.</p>
</dd>
<dt><strong>timeline_stacked</strong><span class="classifier">bool</span></dt><dd><p>If True, then a stacked bar chart will be created for the timeline plot,
with one color per person involved in the chat. If False (default),
will just plot one colored bar with the overall count.</p>
</dd>
<dt><strong>top_n_words</strong><span class="classifier">int</span></dt><dd><p>The number of top words to include in the words bar chart. Default is 10.</p>
</dd>
<dt><strong>stopwords</strong><span class="classifier">None or iterable</span></dt><dd><p>If given, then these words will be removed from the words bar charts.
If None, all words will be kept (Note: this will lead to poor results
as ‘the’, ‘and’, ‘a’, ‘is’ etc. will be the top words. A stopword list
is recommended).</p>
</dd>
</dl>
</dd>
<dt class="field-even">Returns</dt>
<dd class="field-even"><dl class="simple">
<dt>plt.figure</dt><dd><p>A matplotlib figure with all of the message plots on it.</p>
</dd>
</dl>
</dd>
</dl>
<p class="rubric">Examples</p>
<p>This example visualizes the script from Monty Python Flying Circus
Series 1. In just a few lines we can used chatviz to create a sophisticated
infographic. Note: The dates have been randomly created for this example.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>

<span class="kn">from</span> <span class="nn">chatviz</span> <span class="kn">import</span> <span class="n">visualize_chat</span>
<span class="kn">from</span> <span class="nn">chatviz.utils</span> <span class="kn">import</span> <span class="n">STOPWORDS</span>


<span class="k">def</span> <span class="nf">configure_matplotlib</span><span class="p">():</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s2">&quot;figure.figsize&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="mi">40</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">rc</span><span class="p">(</span><span class="s2">&quot;font&quot;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">18</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">rc</span><span class="p">(</span><span class="s2">&quot;axes&quot;</span><span class="p">,</span> <span class="n">titlesize</span><span class="o">=</span><span class="mi">25</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">rc</span><span class="p">(</span><span class="s2">&quot;axes&quot;</span><span class="p">,</span> <span class="n">labelsize</span><span class="o">=</span><span class="mi">22</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">rc</span><span class="p">(</span><span class="s2">&quot;xtick&quot;</span><span class="p">,</span> <span class="n">labelsize</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">rc</span><span class="p">(</span><span class="s2">&quot;ytick&quot;</span><span class="p">,</span> <span class="n">labelsize</span><span class="o">=</span><span class="mi">20</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">rc</span><span class="p">(</span><span class="s2">&quot;legend&quot;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">30</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">rc</span><span class="p">(</span><span class="s2">&quot;figure&quot;</span><span class="p">,</span> <span class="n">titlesize</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">rcParams</span><span class="p">[</span><span class="s2">&quot;font.family&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Humor Sans&quot;</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">configure_matplotlib</span><span class="p">()</span>
    <span class="kn">from</span> <span class="nn">chatviz.utils</span> <span class="kn">import</span> <span class="n">load_example_chat_data</span>

    <span class="n">df</span> <span class="o">=</span> <span class="n">load_example_chat_data</span><span class="p">()</span>
    <span class="n">actors</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s2">&quot;John Cleese&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Eric Idle&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Michael Palin&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Terry Jones&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Graham Chapman&quot;</span><span class="p">,</span>
    <span class="p">]</span>
    <span class="n">palette</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;#20639B&quot;</span><span class="p">,</span> <span class="s2">&quot;#3CAEA3&quot;</span><span class="p">,</span> <span class="s2">&quot;#F6D55C&quot;</span><span class="p">,</span> <span class="s2">&quot;#ED553B&quot;</span><span class="p">,</span> <span class="s2">&quot;#173F5F&quot;</span><span class="p">]</span>
    <span class="n">colors</span> <span class="o">=</span> <span class="p">{</span><span class="n">n</span><span class="p">:</span> <span class="n">c</span> <span class="k">for</span> <span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">c</span><span class="p">)</span> <span class="ow">in</span> <span class="nb">zip</span><span class="p">(</span><span class="n">actors</span><span class="p">,</span> <span class="n">palette</span><span class="p">)}</span>

    <span class="n">visualize_chat</span><span class="p">(</span>
        <span class="n">df</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Monty Python Flying Circus: Series 1&quot;</span><span class="p">,</span>
        <span class="n">colors</span><span class="o">=</span><span class="n">colors</span><span class="p">,</span>
        <span class="n">stopwords</span><span class="o">=</span><span class="n">STOPWORDS</span><span class="p">,</span>
        <span class="n">timeline_stacked</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
        <span class="n">timeline_freq</span><span class="o">=</span><span class="s2">&quot;D&quot;</span><span class="p">,</span>
        <span class="n">timeline_tick_format</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">%d</span><span class="s2"> %b &#39;%y&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../../examples/complete_example.py">Source code</a>, <a class="reference external" href="../../examples/complete_example.png">png</a>, <a class="reference external" href="../../examples/complete_example.hires.png">hires.png</a>, <a class="reference external" href="../../examples/complete_example.pdf">pdf</a>)</p>
<div class="figure align-default">
<img alt="../_images/complete_example.png" src="../_images/complete_example.png" />
</div>
</dd></dl>

</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
        <br/>
        
<div id="sourcelink">
  <a href="../_sources/generated/chatviz.visualize_chat.rst.txt"
     rel="nofollow">Source</a>
</div>
      
    </p>
    <p>
        &copy; Copyright 2019, lrjball.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.2.1.<br/>
    </p>
  </div>
</footer>
  </body>
</html>